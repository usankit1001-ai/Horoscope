import{r as p,j as e,R as Se}from"./index-BnjItsmp.js";const Ee=n=>{var v,U;const c={url:"",method:"GET",headers:{},body:null},o=n.replace(/\\\n/g," ").replace(/\\\r\n/g," ").trim(),m=o.match(/(?:["'])(https?:\/\/[^"']+)(?:["'])|(https?:\/\/[^\s]+)/i);m&&(c.url=(m[1]||m[2]).split(" ")[0].replace(/["']/g,""));const u=o.match(/(?:-X|--request)\s+["']?(\w+)["']?/i);u?c.method=u[1].toUpperCase():(o.includes("-d ")||o.includes("--data")||o.includes("--data-raw"))&&(c.method="POST");const f=/(?:-H|--header)\s+["']?([^"']+)["']?/g;let i;for(;(i=f.exec(o))!==null;){const S=i[1],y=S.indexOf(":");if(y>-1){const _=S.substring(0,y).trim(),N=S.substring(y+1).trim();c.headers[_]=N}}const d=/(?:-d|--data|--data-raw|--data-binary|--data-urlencode)\s+(?:["'](\{[\s\S]+?\}|[^"']+)["']|(\{[\s\S]+?\}|[^"'\s]+))/,g=o.match(d);return g&&(c.body=g[1]||g[2],Object.keys(c.headers).some(S=>S.toLowerCase()==="content-type")||((v=c.body)!=null&&v.trim().startsWith("{")||(U=c.body)!=null&&U.trim().startsWith("["))&&(c.headers["Content-Type"]="application/json")),c},F=(n,c)=>{if(!n)return"";let o=n;return Object.keys(c).sort((u,f)=>f.length-u.length).forEach(u=>{const f=String(c[u]);[new RegExp(`{{\\s*${u}\\s*}}`,"gi"),new RegExp(`{\\s*${u}\\s*}`,"gi"),new RegExp(`:${u}(?![a-zA-Z0-9_])`,"g")].forEach(d=>{o=o.replace(d,f)})}),o},he=n=>{const c=[];let o=[],m="",u=!1;for(let i=0;i<n.length;i++){const d=n[i],g=n[i+1];u?d==='"'&&g==='"'?(m+='"',i++):d==='"'?u=!1:m+=d:d==='"'?u=!0:d===","?(o.push(m.trim()),m=""):d===`
`||d==="\r"?(o.push(m.trim()),o.some(v=>v!=="")&&c.push(o),o=[],m="",d==="\r"&&g===`
`&&i++):m+=d}if((m||o.length>0)&&(o.push(m.trim()),c.push(o)),c.length<2)return[];const f=c[0].map(i=>i.replace(/^"|"$/g,"").trim());return c.slice(1).map(i=>{const d={};return f.forEach((g,v)=>{d[g]=i[v]||""}),d})},Ce=(n,c)=>{if(n.length===0)return;const o=Object.keys(n[0]),m=[o.join(","),...n.map(d=>o.map(g=>`"${String(d[g]||"").replace(/"/g,'""')}"`).join(","))].join(`
`),u=new Blob([m],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a"),i=URL.createObjectURL(u);f.setAttribute("href",i),f.setAttribute("download",c),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f)};var j=(n=>(n.PENDING="PENDING",n.RUNNING="RUNNING",n.PASSED="PASSED",n.FAILED="FAILED",n.ERROR="ERROR",n))(j||{}),fe=(n=>(n.CONTAINS="CONTAINS",n.EXACT="EXACT",n.STARTS_WITH="STARTS_WITH",n))(fe||{});const H=["user-agent","referer","origin","host","cookie","sec-fetch-dest","sec-fetch-mode","sec-fetch-site","content-length","connection"],X="horoscope_qa_v3",W="iVf8NMjXY7Jmb8pjfKG75gumhnjVKvmasH8cEEt2";class Ae extends Se.Component{constructor(c){super(c),this.state={hasError:!1,error:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,o){console.error("ErrorBoundary caught an error",c,o)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-3xl w-full bg-rose-900/90 text-white p-8 rounded-2xl shadow-xl",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"An error occurred"}),e.jsx("p",{className:"mb-4",children:"The app encountered an unexpected error while rendering. Please check the console for details."}),e.jsx("pre",{className:"text-xs whitespace-pre-wrap bg-black/20 p-3 rounded",children:String(this.state.error)})]})}):this.props.children}}const Pe=()=>{const[n,c]=p.useState(""),[o,m]=p.useState([]),[u,f]=p.useState([]),[i,d]=p.useState([]),[g,v]=p.useState(!1),[U,S]=p.useState(0),[y,_]=p.useState("description"),[N,B]=p.useState(null),[T,K]=p.useState("direct"),[L,Y]=p.useState(""),[be,z]=p.useState(!1),[P,Q]=p.useState({jsonPath:"prediction",strategy:fe.CONTAINS}),[w,O]=p.useState([{key:"x-api-key",value:W}]),[G,Z]=p.useState(""),[ee,se]=p.useState(""),[J,q]=p.useState(null),[te,I]=p.useState(null),[ae,E]=p.useState(null),[re,le]=p.useState(!1),[ne,C]=p.useState(!1),[ce,oe]=p.useState(null),ge=/^[A-Za-z0-9-]+$/,ie=s=>!s||!s.trim()?"Header key is required":ge.test(s)?H.includes(s.toLowerCase())?"This header is forbidden in browsers":null:"Invalid header key (letters, numbers and hyphen only)",Ne=()=>{const s=G.trim(),t=ee,l=ie(s);if(l){q(l);return}O(a=>{const x=a.findIndex(r=>r.key.toLowerCase()===s.toLowerCase());if(x!==-1){const r=[...a];return r[x]={key:s,value:t},r}return[...a,{key:s,value:t}]}),Z(""),se(""),q(null)},je=s=>{const t=[...w];t.splice(s,1),O(t)},de=(s,t)=>{const l=s.toLowerCase();if(H.includes(l)){I("Cannot add a forbidden header"),setTimeout(()=>I(null),2e3);return}O(a=>{const x=a.findIndex(r=>r.key.toLowerCase()===l);if(x!==-1){const r=[...a];return r[x]={key:s,value:t},r}return[...a,{key:s,value:t}]}),I(`${s} preset added`),setTimeout(()=>I(null),2e3)},ye=async()=>{le(!0),E(null),C(!1),oe(null);try{const s="https://stagingapi.astroapi.com/api/v1/prediction/monthly?language=eng&month=1&year=2026&report=LOVE&zodiac=ARIES",t={"Content-Type":"application/json"};w.forEach(l=>{l.key&&!H.includes(l.key.toLowerCase())&&(t[l.key]=l.value)});try{const l=await fetch(s,{method:"GET",headers:t}),a=await l.text();l.ok&&a?(E("x-api-key attached for requests (direct mode)."),C(!1)):(E(`Header diagnostic: status=${l.status}. Browser may be blocking headers; try Proxy mode.`),C(!0))}catch(l){try{const a=await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(s)}`);a.ok?(E("Direct request blocked (likely CORS). Proxy reachable but cannot forward custom headers."),C(!0)):(E(`Header diagnostic failed: ${a.status}`),C(!0))}catch{E(`Header diagnostic failed: ${l.message}`),C(!0)}}}catch(s){E(`Header diagnostic failed: ${s.message}`),C(!0)}le(!1),setTimeout(()=>E(null),7e3)},xe=s=>{de("x-api-key",s)};p.useEffect(()=>{const s=localStorage.getItem(X);if(s)try{const t=JSON.parse(s);t.testCases&&d(t.testCases),t.curlString&&c(t.curlString),t.expectedField&&_(t.expectedField),t.compConfig&&Q(t.compConfig),t.customHeaders&&O(t.customHeaders)}catch(t){console.error("Restore error",t)}},[]),p.useEffect(()=>{w.some(t=>t.key.toLowerCase()==="x-api-key")||O(t=>[...t,{key:"x-api-key",value:W}])},[w]),p.useEffect(()=>{localStorage.setItem(X,JSON.stringify({testCases:i,curlString:n,expectedField:y,compConfig:P,customHeaders:w}))},[i,n,y,P,w]);const pe=(s,t)=>{if(s==null)return"";if(!t||!t.trim())return typeof s=="object"?JSON.stringify(s,null,2):String(s);const l=t.trim().replace(/\[(\d+)\]/g,".$1").replace(/^\./,"").split(".").filter(r=>r!=="");let a=s,x=!0;Array.isArray(a)&&l[0]!=="0"&&isNaN(Number(l[0]))&&(a=a[0]);for(const r of l){if(a==null){x=!1;break}if(typeof a=="object"&&a[r]!==void 0)a=a[r];else if(Array.isArray(a)&&!isNaN(Number(r))&&a[Number(r)]!==void 0)a=a[Number(r)];else{x=!1;break}}return x&&a!==void 0&&a!==null?typeof a=="object"?JSON.stringify(a,null,2):String(a).trim():typeof s=="string"?s:""},ue=p.useCallback((s,t)=>{if(s.length===0)return;const l=s.map((a,x)=>{let r="";const h=(t.length>0?t[x]:a)||{};return h[y]?r=h[y]:h.description?r=h.description:r=Object.values(h)[0]||"",{id:`tc-${x}-${Date.now()}`,params:a,expectedResult:r,status:j.PENDING}});d(l)},[y]),we=async()=>{const s=Ee(n);if(!s.url||i.length===0){alert("Missing requirements.");return}v(!0),S(0);const t=[...i],l=3,a=2e3;w.length>0&&T==="bypass"&&(I("Custom headers detected: switching to Direct mode"),K("direct"));for(let x=0;x<t.length;x++){const r=t[x];r.status=j.RUNNING,d([...t]);try{const h=F(s.url,r.params);r.finalUrl=h;let A="",$=0,V=0,me=!1;for(;V<l&&!me;){V++;try{if(T==="bypass"){const b={};Object.entries(s.headers).forEach(([k,ke])=>{H.includes(k.toLowerCase())||(b[k]=F(ke,r.params))}),w.forEach(k=>{k.key&&!H.includes(k.key.toLowerCase())&&(b[k.key]=F(k.value,r.params))}),r.finalHeaders=b;const D=await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(h)}`);A=(await D.json()).contents,$=D.status}else{const b={};Object.entries(s.headers).forEach(([R,k])=>{H.includes(R.toLowerCase())||(b[R]=F(k,r.params))}),w.forEach(R=>{R.key&&!H.includes(R.key.toLowerCase())&&(b[R.key]=F(R.value,r.params))}),r.finalHeaders={...b},console.debug("Request for",r.id,{url:h,headers:r.finalHeaders});const D=await fetch(h,{method:s.method,headers:b});A=await D.text(),$=D.status}$===200&&A&&A.trim()!==""?String(A).toLowerCase().includes("please set custom header")?(C(!0),oe(null),xe(W),I("x-api-key applied automatically."),V<l&&await new Promise(b=>setTimeout(b,a))):me=!0:V<l&&await new Promise(b=>setTimeout(b,a))}catch{V<l&&await new Promise(D=>setTimeout(D,a))}}r.statusCode=$,r.actualResponse=A;let M="";try{const b=JSON.parse(A);M=pe(b,P.jsonPath)}catch{M=A}r.comparedValue=M,r.status=M.toLowerCase().includes(r.expectedResult.toLowerCase())?j.PASSED:j.FAILED}catch(h){r.status=j.ERROR,r.actualResponse=`Error: ${h.message}`}S(Math.round((x+1)/t.length*100)),d([...t])}v(!1)},ve=()=>{if(!N||!L)return;const s=[...i],t=s.findIndex(x=>x.id===N.id);if(t===-1)return;const l=s[t];l.actualResponse=L,l.statusCode=200;let a="";try{const x=JSON.parse(L);a=pe(x,P.jsonPath)}catch{a=L}l.comparedValue=a,l.status=a.toLowerCase().includes(l.expectedResult.toLowerCase())?j.PASSED:j.FAILED,d(s),B({...l}),Y(""),z(!0),setTimeout(()=>z(!1),2e3)};return e.jsx(Ae,{children:e.jsxs("div",{className:"min-h-screen bg-[#0F172A] text-slate-100 flex flex-col font-sans",children:[e.jsxs("header",{className:"border-b border-slate-800 p-6 flex flex-col md:flex-row justify-between items-center bg-[#1E293B] shadow-2xl gap-6 sticky top-0 z-[60]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl shadow-indigo-500/20 shadow-xl",children:e.jsx("i",{className:"fas fa-stethoscope text-xl"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-black tracking-tighter uppercase flex items-center gap-2",children:["Horoscope QA Suite",e.jsx("span",{className:"text-[10px] bg-slate-900 border border-indigo-500/30 px-2 py-0.5 rounded text-indigo-400",children:"PRO V3"})]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Accuracy & Validation Engine"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap justify-center",children:[e.jsxs("div",{className:"bg-slate-900/50 p-1.5 rounded-2xl flex border border-slate-700",children:[e.jsx("button",{onClick:()=>K("direct"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${T==="direct"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Direct"}),e.jsx("button",{onClick:()=>K("bypass"),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${T==="bypass"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Proxy"})]}),T==="bypass"&&w.length>0&&e.jsxs("div",{className:"w-full bg-amber-600/10 border-l-4 border-amber-400 text-amber-300 text-[11px] px-4 py-2 rounded-lg mt-2",children:[e.jsx("strong",{className:"font-bold",children:"Warning:"})," Proxy mode may not forward custom headers. Switch to ",e.jsx("span",{className:"font-black",children:"Direct"})," to include them."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{d([]),localStorage.removeItem(X)},className:"bg-slate-800 hover:bg-rose-600/20 hover:text-rose-400 border border-slate-700 p-3 rounded-2xl transition-all",title:"Reset All",children:e.jsx("i",{className:"fas fa-trash-can"})}),e.jsxs("button",{onClick:()=>Ce(i,"qa_report.csv"),disabled:i.length===0,className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-2xl font-black shadow-lg disabled:opacity-30 text-[10px] uppercase flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-export"})," Report"]}),e.jsxs("button",{onClick:we,disabled:g||!n,className:"bg-indigo-600 hover:bg-indigo-500 px-8 py-3 rounded-2xl font-black shadow-lg disabled:opacity-30 transition-all uppercase text-[10px] flex items-center gap-3",children:[g?e.jsx("i",{className:"fas fa-spinner fa-spin"}):e.jsx("i",{className:"fas fa-vial"}),g?"Validating...":"Start Automation"]})]})]})]}),e.jsxs("main",{className:"p-8 space-y-8 max-w-[1800px] mx-auto w-full",children:[e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase px-2 tracking-widest flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-code text-indigo-500"})," 1. API Template"]}),e.jsx("textarea",{value:n,onChange:s=>c(s.target.value),className:"w-full h-64 bg-[#1E293B] border border-slate-800 p-6 rounded-[2rem] font-mono text-[11px] text-emerald-400 focus:border-indigo-500 outline-none shadow-inner",placeholder:"Paste Postman cURL..."}),e.jsxs("div",{className:"mt-4 bg-[#111827] border border-slate-800 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-2 block",children:"Custom Headers"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>de("x-api-key","iVf8NMjXY7Jmb8pjfKG75gumhnjVKvmasH8cEEt2"),className:"text-[10px] bg-emerald-600 px-3 py-1 rounded-xl font-black",children:"Add x-api-key"}),e.jsx("button",{onClick:ye,disabled:re,className:"text-[10px] bg-sky-600 px-3 py-1 rounded-xl font-black",children:re?"Testing...":"Test Headers"})]})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{value:G,onChange:s=>{Z(s.target.value),q(ie(s.target.value))},placeholder:"Header-Name (e.g. X-Custom-Header)",className:"w-1/4 bg-slate-900 border border-slate-700 p-2 rounded-xl text-[11px]"}),e.jsx("input",{value:ee,onChange:s=>se(s.target.value),placeholder:"Value or {param}",className:"flex-1 bg-slate-900 border border-slate-700 p-2 rounded-xl text-[11px]"}),e.jsx("button",{onClick:Ne,disabled:!!J||!G.trim(),className:"bg-indigo-600 px-4 py-2 rounded-xl text-[11px] font-black disabled:opacity-30",children:"Add"})]}),J&&e.jsx("div",{className:"text-[10px] text-rose-400 mt-2",children:J}),e.jsxs("div",{className:"mt-3 space-y-2",children:[w.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-[11px] font-bold",children:[s.key,":"]}),e.jsx("div",{className:"text-[11px] text-slate-400 truncate",children:s.value}),e.jsx("button",{onClick:()=>je(t),className:"ml-auto text-rose-400 text-[10px] font-black",children:"Remove"})]},t)),te&&e.jsx("div",{className:"text-[10px] text-emerald-400 mt-2",children:te}),ae&&e.jsxs("div",{className:`mt-2 p-3 rounded ${ne?"bg-rose-700/80 text-white":"bg-emerald-700/10 text-emerald-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"text-[11px] font-bold",children:ae}),ne&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>xe("iVf8NMjXY7Jmb8pjfKG75gumhnjVKvmasH8cEEt2"),className:"bg-emerald-600 px-3 py-1 rounded-xl text-[10px] font-black",children:"Add x-api-key"})})]}),ce&&e.jsx("pre",{className:"mt-2 text-xs whitespace-pre-wrap bg-black/10 p-2 rounded",children:String(ce)})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase px-2 tracking-widest flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-table-list text-indigo-500"})," 2. Scenarios CSV"]}),e.jsxs("div",{className:"h-64 border-4 border-dashed border-slate-800 rounded-[2rem] flex flex-col items-center justify-center p-8 bg-[#1E293B]/30 hover:bg-[#1E293B] transition-all relative group",children:[e.jsx("input",{type:"file",accept:".csv",onChange:s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(!t)return;const l=new FileReader;l.onload=x=>{var h;const r=he((h=x.target)==null?void 0:h.result);m(r),ue(r,u)},l.readAsText(t)},className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx("i",{className:"fas fa-file-csv text-3xl text-slate-700 mb-4 group-hover:text-indigo-500 transition-colors"}),e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500",children:o.length>0?`${o.length} ROWS LOADED`:"UPLOAD INPUTS"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase px-2 tracking-widest flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-circle-check text-indigo-500"})," 3. Baseline CSV"]}),e.jsxs("div",{className:"h-64 border-4 border-dashed border-slate-800 rounded-[2rem] flex flex-col items-center justify-center p-8 bg-[#1E293B]/30 hover:bg-[#1E293B] transition-all relative group",children:[e.jsx("input",{type:"file",accept:".csv",onChange:s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];if(!t)return;const l=new FileReader;l.onload=x=>{var h;const r=he((h=x.target)==null?void 0:h.result);f(r),ue(o,r)},l.readAsText(t)},className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx("i",{className:"fas fa-bullseye text-3xl text-slate-700 mb-4 group-hover:text-emerald-500 transition-colors"}),e.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500",children:u.length>0?`${u.length} BASELINES LOADED`:"UPLOAD EXPECTED"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-[10px] font-black text-slate-500 uppercase px-2 tracking-widest flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-sliders-h text-indigo-500"})," 4. Field Mapping"]}),e.jsxs("div",{className:"h-64 bg-[#1E293B] border border-slate-800 p-8 rounded-[2rem] space-y-4 flex flex-col justify-center shadow-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"JSON Prediction Path"}),e.jsx("input",{value:P.jsonPath,onChange:s=>Q({...P,jsonPath:s.target.value}),className:"w-full bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-[11px] font-bold text-emerald-400",placeholder:"prediction"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] font-black text-emerald-400 uppercase mb-1 block",children:"CSV Description Column"}),e.jsx("input",{value:y,onChange:s=>_(s.target.value),className:"w-full bg-slate-900 border border-slate-700 p-2.5 rounded-xl text-[11px] font-bold",placeholder:"description"})]}),e.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase leading-tight italic",children:"Matched data will be used for Pass/Fail status"})]})]})]}),i.length>0&&e.jsxs("div",{className:"bg-[#1E293B] rounded-[2.5rem] shadow-2xl border border-slate-800 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-900/30",children:[e.jsxs("h2",{className:"font-black uppercase tracking-tight text-sm flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-list-check text-indigo-500"}),"Validation Queue"]}),e.jsxs("div",{className:"text-[10px] font-black flex gap-6 text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"})," PASSED: ",i.filter(s=>s.status===j.PASSED).length]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-500"})," FAILED: ",i.filter(s=>s.status===j.FAILED).length]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-900/50",children:[e.jsx("th",{className:"p-5 px-8 text-[9px] font-black uppercase text-slate-500",children:"#"}),e.jsx("th",{className:"p-5 px-8 text-[9px] font-black uppercase text-slate-500",children:"Scenario Data"}),e.jsx("th",{className:"p-5 px-8 text-[9px] font-black uppercase text-slate-500",children:"Expectation (CSV)"}),e.jsx("th",{className:"p-5 px-8 text-[9px] font-black uppercase text-slate-500 text-center",children:"Status"}),e.jsx("th",{className:"p-5 px-8 text-[9px] font-black uppercase text-slate-500 text-center",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:i.map((s,t)=>e.jsxs("tr",{className:"hover:bg-slate-800/20 transition-all",children:[e.jsx("td",{className:"p-5 px-8 font-bold text-slate-600 text-[11px]",children:t+1}),e.jsx("td",{className:"p-5 px-8",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(s.params).slice(0,2).map(([l,a])=>e.jsxs("span",{className:"bg-slate-900/50 px-2.5 py-1 rounded-lg text-[9px] border border-slate-700 font-bold uppercase",children:[e.jsxs("span",{className:"text-slate-500",children:[l,":"]})," ",String(a)]},l))})}),e.jsx("td",{className:"p-5 px-8 max-w-xs overflow-hidden",children:e.jsx("p",{className:"text-[10px] text-slate-400 font-bold line-clamp-2 italic leading-relaxed",children:s.expectedResult||"---"})}),e.jsx("td",{className:"p-5 px-8 text-center",children:e.jsx("span",{className:`px-4 py-1 rounded-full text-[9px] font-black uppercase border ${s.status===j.PASSED?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20 shadow-[0_0_15px_rgba(16,185,129,0.1)]":s.status===j.FAILED?"bg-rose-500/10 text-rose-500 border-rose-500/20 shadow-[0_0_15px_rgba(244,63,94,0.1)]":s.status===j.RUNNING?"bg-indigo-500/10 text-indigo-500 border-indigo-500/20":"bg-slate-800 text-slate-500 border-slate-700"}`,children:s.status})}),e.jsx("td",{className:"p-5 px-8 text-center",children:e.jsx("button",{onClick:()=>B(s),className:"bg-slate-800 hover:bg-indigo-600 px-6 py-2 rounded-xl text-[10px] font-black uppercase transition-all shadow-lg active:scale-95",children:"Verify"})})]},s.id))})]})})]})]}),N&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-md flex items-center justify-center p-6 md:p-12",children:e.jsxs("div",{className:"bg-[#1E293B] w-full max-w-6xl h-[90vh] rounded-[3rem] shadow-2xl flex flex-col border border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-900 border-b border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h3",{className:"text-lg font-black uppercase tracking-tight",children:"Validation Trace"}),e.jsxs("span",{className:"text-[10px] font-bold bg-indigo-500/10 text-indigo-400 px-3 py-1 rounded-full border border-indigo-500/20",children:["CASE #",i.findIndex(s=>s.id===N.id)+1]})]}),e.jsx("button",{onClick:()=>B(null),className:"w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center hover:bg-rose-500 transition-all shadow-lg",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"p-10 overflow-y-auto space-y-10 flex-1",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-invoice"})," Baseline (From CSV: ",y,")"]}),e.jsx("div",{className:"bg-slate-900 p-6 rounded-[2rem] border border-slate-800 h-48 text-[11px] font-bold text-slate-300 whitespace-pre-wrap leading-relaxed shadow-inner overflow-auto custom-scrollbar",children:N.expectedResult||"No description found in CSV."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-magnifying-glass"})," Extracted (From API: ",P.jsonPath,")"]}),e.jsx("div",{className:`bg-slate-900 p-6 rounded-[2rem] border h-48 text-[11px] font-bold whitespace-pre-wrap leading-relaxed shadow-inner overflow-auto custom-scrollbar ${N.status===j.PASSED?"border-emerald-500/40 text-emerald-400":"border-rose-500/40 text-rose-400"}`,children:N.comparedValue||e.jsx("span",{className:"italic opacity-50",children:"Empty response. Use Postman Sync below."})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Full Server Response"}),e.jsxs("span",{className:"text-[9px] font-bold bg-slate-900 px-3 py-1 rounded text-slate-500 border border-slate-800 uppercase tracking-widest",children:["Status: ",N.statusCode||"N/A"]})]}),e.jsx("div",{className:"bg-[#0F172A] p-6 rounded-[2rem] font-mono text-[10px] h-48 overflow-auto border border-slate-800 text-emerald-500/80 whitespace-pre-wrap shadow-inner custom-scrollbar",children:N.actualResponse||"No data captured yet."}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h5",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2",children:"Request URL"}),e.jsx("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-800 text-[11px] font-mono break-words",children:N.finalUrl||"N/A"}),e.jsx("h5",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mt-4 mb-2",children:"Request Headers"}),e.jsx("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-800 text-[11px] whitespace-pre-wrap font-mono",children:N.finalHeaders?Object.entries(N.finalHeaders).map(([s,t])=>e.jsxs("div",{children:[e.jsxs("span",{className:"text-slate-500",children:[s,":"]})," ",t]},s)):e.jsx("div",{className:"italic text-slate-500",children:"No headers recorded for this case."})})]})]}),e.jsxs("div",{className:"bg-indigo-500/5 p-8 rounded-[3rem] border border-indigo-500/10 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h5",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-sync-alt"})," Manual Postman Sync"]}),be&&e.jsxs("span",{className:"text-[10px] font-black text-emerald-500 uppercase animate-bounce",children:[e.jsx("i",{className:"fas fa-check mr-1"})," Saved & Validated!"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("textarea",{value:L,onChange:s=>Y(s.target.value),placeholder:"Paste the JSON response from Postman for this specific scenario...",className:"flex-1 bg-slate-900 border border-slate-800 p-5 rounded-[1.5rem] text-[10px] font-mono h-24 focus:border-indigo-500 outline-none shadow-lg transition-all"}),e.jsxs("button",{onClick:ve,className:"bg-indigo-600 hover:bg-indigo-500 px-10 py-5 rounded-[1.5rem] font-black text-[10px] uppercase shadow-[0_10px_30px_rgba(79,70,229,0.3)] transition-all flex items-center justify-center gap-3 active:scale-95",children:[e.jsx("i",{className:"fas fa-save"})," Sync Result"]})]})]})]})]})}),e.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0F172A; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #475569; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
      `})]})})};export{Pe as default};
